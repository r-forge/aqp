---
output:
  html_document:
    mathjax: null
    jquery: null
    smart: no
    self_contained: no
---

## Setup an ODBC Connection to the Local NASIS Database
NASIS 6.2
<br>`r format(Sys.time(), "%Y-%m-%d")`
<br>DEB

### Introduction
This document describes how setup an ODBC link between a local NASIS database and **R**, so that pedon and DMU records can be queried with the [soilDB](https://r-forge.r-project.org/scm/viewvc.php/*checkout*/docs/soilDB/soilDB-Intro.html?root=aqp) package.


### Open the ODBC Data Source Administrator
 1. Go to the Start Menu and search for 'ODBC'. See [this page](http://msdn.microsoft.com/en-us/library/ms188691.aspx) if you get lost. 
 
 2. With the "User DSN" tab selected, create a new data source by clicking on the "Add..." button. 

**Step by Step:**
 * Select the "SQL Server Native Client" driver.
 * Name the data source `nasis_local`, the data source description is optional.
 * The server location is `XXXXXX\NASISSQLEXPRESS`, where `XXXXXX` is the [full name of your local machine](http://windows.microsoft.com/en-us/windows7/find-your-computer-name). It is usually on the outside of your computer somewhere, or can be accessed by right-clicking on the "My Computer" icon and then clicking on the "Properties" tab. It will look something like: `CASONORA00L354`. When finished click "Next".

* Choose the second option: "SQL Server authentication...":
* login: `NASISSQLRO`
* password: `nasisRe@d0n1y`
* On the next screen, select "Nasis-local" as the default data base.
* Click "Next" and then "Finish" the finalize the connection.
* Close the ODBC control panel by clicking on 'OK'


### Install Required Packages
You will need to install a couple of packages before R is able to read data from the local NASIS database. This only has to be done once, usually the first time you open RStudio on your machine. Open RStudio (start menu, search for RStudio) and copy and paste the following lines into the R console. Press the enter key and wait: R will automatically download and install these packages.
```{r install-packages, eval=FALSE}
# install packages (only first time)
install.packages("RODBC", dep=TRUE) # stable version from CRAN + dependencies
install.packages("soilDB", dep=TRUE) # stable version from CRAN + dependencies
```


### An example R session
After installing the above packages, add some pedons or components into the selected set and try loading them into your R session.
```{r example, eval=FALSE}
# load required libraries
library(soilDB)

# fetch all pedons from the selected set in local NASIS database
fp <- fetchNASIS()

# fetch all DMU records from the selected set in local NASIS database
fc <- fetchNASIS_component_data()
```

