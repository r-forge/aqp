<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>R: Apply a function to soil profiles within a...</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="R.css">

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head><body>

<table width="100%" summary="page for profileApply-methods {aqp}"><tr><td>profileApply-methods {aqp}</td><td align="right">R Documentation</td></tr></table>

<h2>Apply a function to soil profiles within a SoilProfileCollection object.</h2>

<h3>Description</h3>

<p>Apply a function to soil profiles within a SoilProfileCollection object, each iteration has access to a SoilProfileCollection object.</p>


<h3>Value</h3>

<p>A vector of length <code>nrow(object)</code> (horizon data) or of length <code>length(object)</code> (site data).</p>


<h3>Methods</h3>



<dl>
<dt><code>signature(object = "SoilProfileCollection")</code></dt><dd></dd>
</dl>


<h3>See Also</h3>

 <p><code><a href="SPC-slab-methods.html">slab</a></code> </p>


<h3>Examples</h3>

<pre><code class="r">
data(sp1)
depths(sp1) &lt;- id ~ top + bottom

# scale properties within each profile
# scaled = (x - mean(x)) / sd(x)
sp1$d &lt;- profileApply(sp1, FUN=function(x) round(scale(x$prop), 2))
plot(sp1, name=&#39;d&#39;)
</code></pre>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAJYCAMAAACJuGjuAAAAzFBMVEX9/v0AAAAAAEYAAHMARkYARpoAdL09LyE/LiNDLBtGAABGAEZGAHNGRgBGRkZGdL1Gm95VRjZYRTdZRDlaRSxdQy9fQjJiQSZkQCtyXU5zAABzAHNzRppzXVBzdABzdEZzdHNzdJpzdL1zm95zvv11XUF4XER6XDeAWECPd1uaRgCaRkaaRnOadEaadHOadJqam3Oavpqa396a3/2pkXS9dAC9dEa9dHO9m0a9vnO9/t69/v3em0be397e/v39vnP935r9/r39/t79/v0RvdRIAAAARHRSTlP/////////////////////////////////////////////////////////////////////////////////////////AHHSjxIAAAAJcEhZcwAAD2EAAA9hAag/p2kAABobSURBVHic7Z2Nmtu4dUDDsXfaTrKeaZu0jbfdJraSNvbGdnc6ttPRmhrp/d+pAiGJIHlBAbq6HIo857Nkf/IVSFFHAIjfX20ADPjVc58ATBPEAhMQC0xALDABscAExAITEAtMQCwwAbHABMQCExALTEAsMAGxwATEAhMQC0xALDABscAExAITEAtMQCwwAbHABMQCExALTEAsMAGxwATEAhMQC0xALDABscAExAITEAtMQCwwAbHABMQCExALTEAsMAGxwATEAhMQC0xALDABscAExAITEAtMQCwwAbHABMQCExALTEAsMAGxwATEAhMQC0xALDABscAExAITEAtMQCwwAbHABMQCExALTEAsMAGxwATEAhMQC0xALDABscAExAITEAtMQCwwAbHABMQCExALTEAsMAGxwATEAhMQC0xALDABscAExAITEAtMQCwwAbHABMQCExALTBhErNVNURTffdssi+Jus3verH59nxa6flcU14mpPhTFIvUE1u+EVCOJXgnnKoWWyae6ffKnkXYCiam6ayVdgOEZRqytQ0+v77Z/Hf5sr4r0ZUmhyxePT6+FqyWEllf35YvHtBPYfhOSWN3I9Tvh+5dD90knHX/zkHiq20+Vmuryu2/yD3ZwhhSrrAzxz6tf/4+cY3VDt6/2idUKXfZ8W43Q1W9+jIsVRj69jmQY3VDR6tipln2/rOa16hUrDN2KJV6r4RmyKPSf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" alt="plot of chunk unnamed-chunk-1"/> </p>

<pre><code class="r">

# compute depth-wise differencing by profile
# note that our function expects that the column &#39;prop&#39; exists
f &lt;- function(x) { c(x$prop[1], diff(x$prop)) }
sp1$d &lt;- profileApply(sp1, FUN=f)
plot(sp1, name=&#39;d&#39;)
</code></pre>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAJYCAMAAACJuGjuAAAAw1BMVEX9/v0AAAAAAEYAAHMARkYARnMARpoAdL09LyE/LiNDLBtGAABGAEZGAHNGRgBGRkZGdL1Gm95VRjZYRTdZRDlaRSxdQy9fQjJiQSZkQCtyXU5zAABzAHNzRkZzRppzXVBzdABzdHNzdL1zm95zvv11XUF4XER6XDeAWECPd1uaRgCaRkaaRnOadHOadJqam3Oavpqa396a3/2pkXS9dAC9dEa9dHO9m0a9/v3em0be397e/v39vnP935r9/r39/t79/v29/M2aAAAAQXRSTlP/////////////////////////////////////////////////////////////////////////////////////ADBV7McAAAAJcEhZcwAAD2EAAA9hAag/p2kAABgXSURBVHic7Z0NdxvJcUXfcJOlE9mW6MRO4t3EsYR8WLsrJQy5EiyAxP//VcEMtKsVuorqQqOmBtXvnj2yD09N4RG4nG7M9MxgR4gDiA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoLoACQniA5AcoI5XmT7bBiGrz/s1sNws/v4727769u60sfXw3Bd2fVuGFa1AR5fC12VpldCVql0Ux11/88hRl2Ayq7jeyW9AfODOV5kdOjhm5v9//z83/5dkT4sqXT91fuHb4R3SyjdXN1uvnpfF2D/SUhilZWP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" alt="plot of chunk unnamed-chunk-1"/> </p>

<pre><code class="r">
# compute depth-wise cumulative sum by profile
# note the use of an anonymous function
sp1$d &lt;- profileApply(sp1, FUN=function(x) cumsum(x$prop))
plot(sp1, name=&#39;d&#39;)
</code></pre>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAJYCAMAAACJuGjuAAAAzFBMVEX9/v0AAAAAAEYAAHMARkYARpoAdL09LyE/LiNDLBtGAABGAEZGAHNGRgBGRkZGdL1Gm95VRjZYRTdZRDlaRSxdQy9fQjJiQSZkQCtyXU5zAABzAHNzRppzXVBzdABzdEZzdHNzdL1zm95zvv11XUF4XER6XDeAWECPd1uaRgCaRkaaRnOadEaadHOadJqam3Oavpqa396a3/2pkXS9dAC9dEa9dHO9m0a9vnO9/t69/v3em0be397e/r3e/v39vnP935r9/r39/t79/v36oqIMAAAARHRSTlP/////////////////////////////////////////////////////////////////////////////////////////AHHSjxIAAAAJcEhZcwAAD2EAAA9hAag/p2kAABcnSURBVHic7Z0Pd9y4dUczcqK2TmwpbdI2XreJPWkb2127VS25GW53/n3/71Ri6F1b5HsyoDc/DDm896zkPTqPIGfmDgCCwMMv9gACfnHqC4DzBLFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigYQqYm2eLhaLX/24bxaL6/3n3/vNr2/yQndvFovLzFI/LhbL3AvYvTFKdQq9MK7VCl1nX2r7q7uMvAvILDW9V9YbUJ86YrUObV9ct//8/F/7rlgflhXaPFltXyyzQtcXN+snq7wLaD8JS6xh5O6N8fnboT8VnXX+/cfMS21fVW6pza9+tL+w1akp1vpgSPd78+v/smusYWj714fE6oU2D3xa90I3v/lXX6yvI7cvnApjGGpa7V3q+qFv1v336kGxvg5txTLfq/rUbAq7V/3Ta3+w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" alt="plot of chunk unnamed-chunk-1"/> </p>

<pre><code class="r">

# compute profile-means, and save to @site
# there must be some data in @site for this to work
site(sp1) &lt;- ~ group
</code></pre>

<pre><code>## Error: object &#39;group&#39; not found
</code></pre>

<pre><code class="r">sp1$mean_prop &lt;- profileApply(sp1, FUN=function(x) mean(x$prop, na.rm=TRUE))

# re-plot using ranks defined by computed summaries (in @site)
plot(sp1, plot.order=rank(sp1$mean_prop))
</code></pre>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAJYCAMAAACJuGjuAAAAyVBMVEX9/v0AAAAAAEYAAHMARkYARpoAdJoAdL09LyE/LiNDLBtGAABGAEZGAHNGRgBGRkZGRppGdL1Gm95VRjZYRTdZRDlaRSxdQy9fQjJiQSZkQCtyXU5zAABzAHNzRppzXVBzdABzdHNzdL1zm71zm95zvt5zvv11XUF4XER6XDeAWECPd1uaRgCaRnOam3Oavpqa372a396a3/2pkXS9dAC9dEa9dHO9m0a9m3O9/r29/v3em0bem3Pe/v39vnP935r9/r39/t79/v1EYYhTAAAAQ3RSTlP///////////////////////////////////////////////////////////////////////////////////////8AQWIE7wAAAAlwSFlzAAAPYQAAD2EBqD+naQAAFZFJREFUeJzt3Q172+Z1h/FCTqZtWuNZ29ptVdxFVbmXOl7HWXZH2CTD7/+hBpCJYxPnLz8nBwcggPu+ZLXx9eghJf8IQCBefnUgSuhXYz8BmmfAopSARSkBi1ICFqUELEoJWJQSsCglYFFKwKKUgEUpAYtSAhalBCxKCViUErAoJWBRSsCilIBFKQGLUgIWpQQsSglYlBKwKCVgUUrAopSARSkBi1ICFqUELEoJWJQSsCglYFFKwKKUgEUpAYtSAhalBCxKCViUErAoJWBRSsCilIBFKQGLUgIWpQQsSglYlBKwKCVgUUrAopSARSkBi1ICFqUELEoJWJQSsCglYFFKwKKUgEUpAYtSAhalBCxKCViUErAoJWBRSsCilIBFKQGLUgIWpQQsSglYlBKwKCVgUUrAopSARSkBi1ICFqUELEoJWJQSsCglYFFKwKKUgEUpDQJrd1NV1dcfDnVV3R5+/LytquuyoT+8cg1dlQ1tPh3/o+Cpvil+/Hbo1bps6GH3d8ZINWvhd3VofgTWcx2+YWA1P8L93W3zP2cfRUPrZ5v9nfGDtYZ+/aF01uZv3zzblIzcXhU/1R9edamqx9/dWATFE9gaT9X+rmrzRTB8Q8LaHoV8/Fw6tPnbp2B9OrSBVTq0WWaay5buyC+8Bj4dur8TCzdr1v+2l1jmD6B+AtZnQ3e//rclwTots0//7D9+rp5cv3w6VC3ejaHNqvDqGwuWMWvx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" alt="plot of chunk unnamed-chunk-1"/> </p>

<pre><code class="r">


##
## helper functions: these must be modified to suit your own data
##

# compute the weighted-mean of some property within a given diagnostic horizon
# note that this requires conditional eval of data that may contain NA
# see ?slab for details on the syntax
# note that function expects certain columns within &#39;x&#39;
f.diag.wt.prop &lt;- function(x, d.hz, prop) {
    # extract diagnostic horizon data
    d &lt;- diagnostic_hz(x)
    # subset to the requested diagnostic hz
    d &lt;- d[d$diag_kind == d.hz, ]
    # if missing return NA
    if(nrow(d) == 0)
        return(NA)

    # extract depths and check for missing
    sv &lt;- c(d$featdept, d$featdepb)
    if(any(is.na(sv)))
        return(NA)

    # create formula from named property
    fm &lt;- as.formula(paste(&#39;~&#39;, prop))
    # return just the (weighted) mean, accessed from @horizons
    s &lt;- slab(x, fm, seg_vect=sv)$p.mean
    return(s)
}


# conditional eval of thickness of some diagnostic feature or horizon
# will return a vector of length(x), you can save to @site
f.diag.thickness &lt;- function(x, d.hz) {
    # extract diagnostic horizon data
    d &lt;- diagnostic_hz(x)
    # subset to the requested diagnostic hz
    d &lt;- d[d$diag_kind == d.hz, ]
    # if missing return NA
    if(nrow(d) == 0)
        return(NA)

    # compute thickness
    thick &lt;- d$featdepb - d$featdept
    return(thick)
}


# conditional eval of property within particle size control section
# makes assumptions about the SPC that is passed-in
f.psc.prop &lt;- function(x, prop) {
  # these are accessed from @site
  sv &lt;- c(x$psctopdepth, x$pscbotdepth)
  # test for missing PCS data
  if(any(is.na(sv)))
    return(NA) 

    # this should never happen... unless someone made a mistake
    # check to make sure that the lower PSC boundary is shallower than the depth
    if(sv[2] &gt; max(x))
        return(NA)

  # create formula from named property
  fm &lt;- as.formula(paste(&#39;~&#39;, prop))
  # return just the (weighted) mean, accessed from @horizons
  s &lt;- slab(x, fm, seg_vect=sv)$p.mean
  return(s)
}

</code></pre>


<hr><div align="center">[Package <em>aqp</em> version 1.4-7 <a href="00Index.html">Index</a>]</div>
</body></html>
