<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>R: Apply a function to soil profiles within a...</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="R.css">

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head><body>

<table width="100%" summary="page for profileApply-methods {aqp}"><tr><td>profileApply-methods {aqp}</td><td align="right">R Documentation</td></tr></table>

<h2>Apply a function to soil profiles within a SoilProfileCollection object.</h2>

<h3>Description</h3>

<p>Apply a function to soil profiles within a SoilProfileCollection object, each iteration has access to a SoilProfileCollection object.</p>


<h3>Value</h3>

<p>A vector of length <code>nrow(object)</code> (horizon data) or of length <code>length(object)</code> (site data).</p>


<h3>Methods</h3>



<dl>
<dt><code>signature(object = "SoilProfileCollection")</code></dt><dd></dd>
</dl>


<h3>See Also</h3>

 <p><code><a href="SPC-slab-methods.html">slab</a></code> </p>


<h3>Examples</h3>

<pre><code class="r">
data(sp1)
depths(sp1) &lt;- id ~ top + bottom

# scale properties within each profile
# scaled = (x - mean(x)) / sd(x)
sp1$d &lt;- profileApply(sp1, FUN=function(x) round(scale(x$prop), 2))
plot(sp1, name=&#39;d&#39;)
</code></pre>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAArwAAAK8CAMAAAA6ZJxxAAAAllBMVEX9/v0AAAAAAEYAAHMARkYARpoAdL1GAABGAEZGAHNGRgBGRkZGdL1Gm95zAABzAHNzRppzdABzdEZzdHNzdJpzdL1zm95zvv2aRgCaRkaaRnOadEaadHOadJqam3Oavpqa396a3/29dAC9dEa9dHO9m0a9vnO9/t69/v3em0be397e/v39vnP935r9/r39/t79/v3///9D2fDkAAAAMnRSTlP///////////////////////////////////////////////////////////////8A/7N2ihAAAAAJcEhZcwAAD2EAAA9hAag/p2kAAB2iSURBVHic7Z0Ne5s4toCXdJrsTpPOzN1t3Xbb3nGa7o0nOPb+/z93LWQbGwRIcHzg4Pd9gidPOgcJ/FqWhD7+tgUwyt/GzgBAX5AXzIK8YBbkBbMgL5gFecEsyAtmQV4wC/KCWZAXzIK8YBbkBbMgL5gFecEsyAtmQV4wC/KCWZAXzIK8YBbkBbMgL5gFecEsyAtmQV4wC/KCWZAXzIK8YBbkBbMgL5gFecEsyAtmQV4wC/KCWZAXzIK8YBbkBbMgL5gFecEsyAtmQV4wC/KCWZAXzIK8YBbkBbMgL5gFecEsyAtmQV4wC/KCWZAXzIK8YBbkBbMgL5gFecEsyAtmQV4wC/KCWZAXzIK8YBbkBbMgL5gFecEsyAtmQV4wC/KCWZAXzIK8YBbkBbMgL5gFecEsyAtmQV4wC/KCWZAXzIK8YBbkBbMgL5gFecEsyAtmQV4wC/KCWZAXzIK8YBbkBbMgL5gFecEsyAtmQV4wC/KCWTTlXd9lWfb2ZbvKsoft/nW7/vsyMWbzKctuU9N5zLJFct42n9rSaUjmpu16QjF5+uXsXnwO07KWmoy70613bWRU5d15+vr+Yfef48/ulrW+2aGY1Zvn1/dt9zQQk98s8zfPiXnbvYOt8tZDNp9ajGqIOSSWlrXtY9vlhO9AcjKrty8dZcu4jCBvXsjnX9d//9+Okrces/trlLyVmFWMvGcx63/8ESHvacjr+67irR7T/qFqupy8vYAP3ek4eU9jdvK23+mRGaHa4G/J4cbEVRvOY9q/zsMxq44Svh6z+bR4jKg2nIbslOr4XNVjXBUg+XJ63IE8ruJ0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" alt="plot of chunk unnamed-chunk-1"/> </p>

<pre><code class="r">

# compute depth-wise differencing by profile
# note that our function expects that the column &#39;prop&#39; exists
f &lt;- function(x) { c(x$prop[1], diff(x$prop)) }
sp1$d &lt;- profileApply(sp1, FUN=f)
plot(sp1, name=&#39;d&#39;)
</code></pre>

<p><img src="data:image/png;base64,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104u3u/3o14t4tcc9Sy2bFg/4vUmF+/+/9i8/7Zrmyb2LIsegbV2uy7dhSDJi0F6Ea83xXgfD+Eabnm7nejuEryvh8vwuoTbt1efm7u8BROvN6dTFWs6JTK0/sNeyJd/Hy6Abhfr2/ZudZ24njSIeAVcKCqv9YSWsN+J/ivebpO+D/gj8c7Q/OI97ESfdhuO/414Z2l+8XY70X99YDvs8xLvPM0vXhvEK4B4w4hXAPGGEa8A4g0jXgHEG0a8Aog3jHgFEG8Y8Qog3jDiFUC8YcQrgHjDiFcA8YYRrwDiDSNeAcQbRrwCiDeMeAUQbxjxCiDeMOIVQLxhxCuAeMOIVwDxhhGvAOINI14BxBtGvAKIN4x4BRBvGPEKIN4w4hVAvGHEK4B4w4hXAPGGEa8A4g0jXgHEG0a8Aog3jHgFEG8Y8Qog3jDiFUC8YcQrgHjDiFcA8YYRrwDiDSNeAcQbRrwCiDeMeAUQbxjxCiDeMOIVUPIc4aL1EC+sseUNI14BxBtGvAKIN4x4BRBvGPEKcIv3Mh8Mifc1Y8sbRrwCIlFt3jULj/WMXqzB1IKIV0Akqnax+fDssJ7RizWYWhDxCohE9eVb98/l1zN6sQZTCyJeAcQbRrwC2G0II14BfGALI14BHCoLI14BxBtGvAKIN4x4BRBvGPEKmDbe9c3VctxijaZ3hngFTBvv03J1PW6xRtM7Q7wCpr4MaDXuiBzx4vJix5PvRy7WZnbniBcn4Xg370d+B028uLxwvI9Nwz4vasehMsgiXsgiXsgiXsgiXsgiXsgiXsgiXsgiXsjidk/AS8QLWcQLWcQLWcQLWcQLWcQLWcQLWcQLWcQLWcQLWcQLWcQLWcQLWcQLWcQLWcQLWcQLWYF4uxtWr2+axbgHGhEvLi1wSVF3w+rurr/HR8l1Cbdvrz43d3kLJl5MYrVom6vl8SGe7WJ9296trnOfiUi8mMLhhtWb+2O83UNo9wF/JF4I6G5Y/bTc3B93G7o/vxIvNHQ3rO4+tB0/sB32eYkXrwnxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQhbxQtb/A4+g1+cgTmD3AAAAAElFTkSuQmCC" alt="plot of chunk unnamed-chunk-1"/> </p>

<pre><code class="r">
# compute depth-wise cumulative sum by profile
# note the use of an anonymous function
sp1$d &lt;- profileApply(sp1, FUN=function(x) cumsum(x$prop))
plot(sp1, name=&#39;d&#39;)
</code></pre>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAArwAAAK8CAMAAAA6ZJxxAAAAllBMVEX9/v0AAAAAAEYAAHMARkYARpoAdL1GAABGAEZGAHNGRgBGRkZGdL1Gm95zAABzAHNzRppzdABzdEZzdHNzdL1zm95zvv2aRgCaRkaaRnOadEaadHOadJqam3Oavpqa396a3/29dAC9dEa9dHO9m0a9vnO9/t69/v3em0be397e/r3e/v39vnP935r9/r39/t79/v3///8HSqAQAAAAMnRSTlP///////////////////////////////////////////////////////////////8A/7N2ihAAAAAJcEhZcwAAD2EAAA9hAag/p2kAABoNSURBVHic7d0Nd9NImobhUZgJM5DQ7E4w9Dbs5oMdi8Vf8///3Lrs4Ca4qlwlvX6lR76vM9Bz+pySZOduRZLl0l82gKi/DL0BQFfEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1nEC1me8S5fN03zt++btmluN89/b5Z/v68cs/7YNNe163lomln1tq0/5taTWM1V7vXExizqX872r/0W1m1a7WrCO5191wbmGu+209W72+0/Dv/bvmXZH3ZsTPtqvnqXe08jYxZX94tX88pt2/4Es/EeD1l/zBSVGPNjZXWbtnnIvZz4O1C9mvZv30/sW4Y1QLyLXXz7v5d//+8Te97jMdt/WxTvL2PaknhfjFn+4z8K4v15yOrdqd3b8Zj8f1Spl7PI7+Bj73RZvD+P2cabf6cHNsBhw/4t+fHGlB02vByT/3UeH9Oe2MMfj1l/nD0UHDb8PGSb1In/ro7HhEOA6pfT4R1YlB04vXwHmqs3xLvz3OnLXcipeCNjtvuH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" alt="plot of chunk unnamed-chunk-1"/> </p>

<pre><code class="r">

# compute profile-means, and save to @site
# there must be some data in @site for this to work
site(sp1) &lt;- ~ group
sp1$mean_prop &lt;- profileApply(sp1, FUN=function(x) mean(x$prop, na.rm=TRUE))

# re-plot using ranks defined by computed summaries (in @site)
plot(sp1, plot.order=rank(sp1$mean_prop))
</code></pre>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAArwAAAK8CAMAAAA6ZJxxAAAAw1BMVEX9/v0AAAAAAEYAAHMARkYARpoAdL1GAABGAEZGAHNGRgBGRkZGRppGdJpGdL1Gm95zAABzAHNzRnNzRppzdABzdEZzdHNzdL1zm5pzm95zvr1zvt5zvv2aRgCaRnOadEaadJqam0aam3Oam5qam72am96avpqa372a396a3/29dAC9dEa9dHO9m0a935q93969/r29/t69/v3em0bem3Pem5re35re397e/t7e/v39vnP9vpr935r9/r39/t79/v3///8BANofAAAAQXRSTlP///////////////////////////////////////////////////////////////////////////////////8A/45z/jgAAAAJcEhZcwAAD2EAAA9hAag/p2kAABviSURBVHic7Z0Bf9u4eYcrZ7XbpbPi5Ha+7NQ0TbZkspMuJ2a9CydF9/0/1UhKkRULJAG8IF+81PP8HDfN76A/SD2CQBAA/7AFMMoftCsAEAvyglmQF8yCvGAW5AWzIC+YBXnBLMgLZkFeMAvyglmQF8yCvGAW5AWzIC+YBXnBLMgLZkFeMAvyglmQF8yCvGAW5AWzIC+YBXnBLMgLZkFeMAvyglmQF8yCvGAW5AWzIC+YBXnBLMgLZkFeMAvyglmQF8yCvGAW5AWzIC+YBXnBLMgLZkFeMAvyglmQF8yCvGAW5AWzIC+YBXnBLMgLZkFeMAvyglmQF8yCvGAW5AWzIC+YBXnBLMgLZkFeMAvyglmQF8yCvGAW5AWzIC+YBXnBLMgLZkFeMAvyglmQF8yCvGAW5AWzIC+YBXnBLMgLZkFeMAvyglmQF8yCvGAW5AWzIC+YBXnBLMgLZkFeMAvyglmQF8yCvGAW5AWzIC+YBXnBLMgLZkFeMMuY8q6vZrPZH79si9lsvt3/Lmezy8AyX/8aV2YRWKb61fyfkMO5C69aXeZiGVhmu/5TaJG78DOwrc5b5+EoM6q81QnfPJtX//PoJ6xM8WS1edb1PrjK/PFLcE71r3dPVkFFyovww/n6144PSFvV1lfdvjurVnYdjfsMFN2fRWUU5C0b+Q6/g8tU/+ol73GZSt7gMtXXgo8hx0V8P4vHZTbP+lprV8670JjqXwsfeb8rs/7zD8i7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" alt="plot of chunk unnamed-chunk-1"/> </p>

<pre><code class="r">


##
## helper functions: these must be modified to suit your own data
##

# compute the weighted-mean of some property within a given diagnostic horizon
# note that this requires conditional eval of data that may contain NA
# see ?slab for details on the syntax
# note that function expects certain columns within &#39;x&#39;
f.diag.wt.prop &lt;- function(x, d.hz, prop) {
    # extract diagnostic horizon data
    d &lt;- diagnostic_hz(x)
    # subset to the requested diagnostic hz
    d &lt;- d[d$diag_kind == d.hz, ]
    # if missing return NA
    if(nrow(d) == 0)
        return(NA)

    # extract depths and check for missing
    sv &lt;- c(d$featdept, d$featdepb)
    if(any(is.na(sv)))
        return(NA)

    # create formula from named property
    fm &lt;- as.formula(paste(&#39;~&#39;, prop))
    # return just the (weighted) mean, accessed from @horizons
    s &lt;- slab(x, fm, seg_vect=sv)$p.mean
    return(s)
}


# conditional eval of thickness of some diagnostic feature or horizon
# will return a vector of length(x), you can save to @site
f.diag.thickness &lt;- function(x, d.hz) {
    # extract diagnostic horizon data
    d &lt;- diagnostic_hz(x)
    # subset to the requested diagnostic hz
    d &lt;- d[d$diag_kind == d.hz, ]
    # if missing return NA
    if(nrow(d) == 0)
        return(NA)

    # compute thickness
    thick &lt;- d$featdepb - d$featdept
    return(thick)
}


# conditional eval of property within particle size control section
# makes assumptions about the SPC that is passed-in
f.psc.prop &lt;- function(x, prop) {
  # these are accessed from @site
  sv &lt;- c(x$psctopdepth, x$pscbotdepth)
  # test for missing PCS data
  if(any(is.na(sv)))
    return(NA) 

    # this should never happen... unless someone made a mistake
    # check to make sure that the lower PSC boundary is shallower than the depth
    if(sv[2] &gt; max(x))
        return(NA)

  # create formula from named property
  fm &lt;- as.formula(paste(&#39;~&#39;, prop))
  # return just the (weighted) mean, accessed from @horizons
  s &lt;- slab(x, fm, seg_vect=sv)$p.mean
  return(s)
}

</code></pre>


<hr><div align="center">[Package <em>aqp</em> version 1.4-6 <a href="00Index.html">Index</a>]</div>
</body></html>
