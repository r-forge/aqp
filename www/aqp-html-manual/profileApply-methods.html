<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Apply a function to soil profiles within a...</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/languages/r.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head><body>

<table width="100%" summary="page for profileApply-methods {aqp}"><tr><td>profileApply-methods {aqp}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Apply a function to soil profiles within a SoilProfileCollection object.</h2>

<h3>Description</h3>

<p>Apply a function to soil profiles within a SoilProfileCollection object, each iteration has access to a SoilProfileCollection object.</p>


<h3>Usage</h3>

<pre>
# method for SoilProfileCollection objects
profileApply(object, FUN, simplify=TRUE, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>object</code></td>
<td>
<p>a SoilProfileCollection</p>
</td></tr>
<tr valign="top"><td><code>FUN</code></td>
<td>
<p>a function to be applied to each profile within the collection</p>
</td></tr>
<tr valign="top"><td><code>simplify</code></td>
<td>
<p>logical, should the result be simplified to a vector? see examples</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>further arguments passsed to FUN</p>
</td></tr>
</table>


<h3>Value</h3>

<p>When simplify is TRUE, a vector of length <code>nrow(object)</code> (horizon data) or of length <code>length(object)</code> (site data). When simplify is FALSE, a list is returned.</p>


<h3>Methods</h3>


<dl>
<dt><code>signature(object = "SoilProfileCollection")</code></dt><dd></dd>
</dl>


<h3>See Also</h3>

 <p><code><a href="SPC-slab-methods.html">slab</a></code>, <code><a href="estimateSoilDepth.html">estimateSoilDepth</a></code></p>


<h3>Examples</h3>

<pre><code class="r">data(sp1)
depths(sp1) &lt;- id ~ top + bottom

# estimate soil depth using horizon designations
profileApply(sp1, estimateSoilDepth, name=&#39;name&#39;, top=&#39;top&#39;, bottom=&#39;bottom&#39;)
</code></pre>

<pre><code>## P001 P002 P003 P004 P005 P006 P007 P008 P009 
##   89   59   67   62   68  200  233  200  240
</code></pre>

<pre><code class="r"># scale properties within each profile
# scaled = (x - mean(x)) / sd(x)
sp1$d &lt;- profileApply(sp1, FUN=function(x) round(scale(x$prop), 2))
plot(sp1, name=&#39;d&#39;)
</code></pre>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAJYCAMAAACJuGjuAAAAk1BMVEUAAAAAAFQAAIAAVFQAVKYAgMZUAABUAFRUAIBUVABUgMZUpuOAAACAAICAVKaAgACAgFSAgICAgKaAgMaAxv+mVACmVFSmVICmgFSmgICmgKampoCmxqam4+Om4//GgADGgFTGgIDGplTGpoDGxoDG/+PG///jplTjpoDj4+Pj///y8vL/xoD/46b//8b//+P///9pq5DsAAAACXBIWXMAAA9hAAAPYQGoP6dpAAAaJklEQVR4nO2dDXebOBZASTrJ7MSdne7G7WzbHacfs3Gmg2P//1+3FtgGLCEkxBOyde+p3Z708YTxjQSSQMUOQIBi7h2A6wSxQATEAhEQC0RALBABsUAExAIREAtEQCwQAbFABMQCERALREAsEAGxQATEAhEQC0RALBABsUAExAIREAtEQCwQAbFABMQCERALREAsEAGxQATEAhEQC0RALBABsUAExAIREAtEQCwQAbFABMQCERALREAsEAGxQATEAhEQC0RALBABsUAExAIREAtEQCwQAbFABMQCERALREAsEAGxQATEAhEQC0RALBABsUAExAIREAtEQCwQAbFABMQCERALREAsEAGxQATEAhEQC0RALBABsUAExAIREAtEQCwQAbFABMQCERALREAsEAGxQATEAhEQC0RALBABsUAExAIREAtEQCwQAbFABMQCERALREAsEAGxQATEAhEQC0RALBABsUAExAIREAtEQCwQAbFABMQCERALREAsEAGxQATEAhGiiLW5L4ripx+7dVEsdof33ebnlVvo9n1R3DlmfSqKpesObN8bsvYkvTHsqym0dN7V/Vu9G2474JhVHSvTAYhPHLH2Dr2+Xez/Ov3ZHxXTl2UKXd8+v741HC1DaHmzKm+f3XZg/02YxNIjt+8N37859Jjaqfzdk+Ou7j+Va9b1Tz/Mv7DRiSlWWRlSv29+/q+5xtJD9z+1iXUWurZ8W53QzT9+6xerHfn6tqfC0EONVvftamn7zeoeK6tY7dC9WMZjFZ+YTWH9qY+f3doUdkONjZY5dG3+tvTQ7fvlU39T2I7cC2AWWw9V7Zvrrpo/lDG0tDbw3U9V3PySkVi1Q91f2B6xDKH730rnrP2V21no+m5nFMuY1NgaGkJLS6t9nnVzbxQgMGvP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sZplcDb39oUGEevyiSjW+rRw17fDWr+920+wD3ETwzkRp818fT79eWIVexiBrXNM/fltuf3ddq2JWGBkqCn8z2r7wVZlIRYYsXWOcfIOo6G7AURALBABsUAExAIREAtEQCwQgZspIEkQC0RALBABsUAExAIREAtEQCwQAbFABMQCERALREAsEAGxQATEAhEM3//m/ma1uS+W9V2vEyaGjDB8/19W5V25PN7qo/R6eXfz2X5PhlNiyAjjfBv19JubVX1n4nq5eVgvyrvXR8/E0+4nXAGVQ6+Pp9updy+rcoFYEMjrr+rRla+PzV2v3xELwnkqijt1At88soYaC5IBsUAExAIREAtEQCwQAbFABMQCERALREAsEAGxQATEAhEQC0RALBABsUAExAIREAtEQCwQAbFABMQCERALREAsEAGxQATEAhEQC0RALBABsUAExAIREAtEQCwQAbFABMQCERALREAsEAGxQATEAhEQC0RALBABsUAExAIREAtEQCwQAbFABMQCERALREAsEAGxQATEAhEQC0RALBABsUAExAIREAtEQCwQAbFABMQCERALREAsEAGxQATEAhEQC0RALBABsUAExAIREAtEQCwQAbFABMQCERALREAsEAGxQATEAhEQC0RALBABsUAExAIREAtEQCwQAbFABMQCERALREAsEAGxQATEAhEQC0RALBABsUAExAIREAtEQCwQAbFABMQCERALREAsEAGxQATEAhEQC0RALBABsUAExAIREAtEQCwQAbFABMQCERALREAsEAGxQATEAhEQC0RALBABsUCE/wOKwd7S7YbA/wAAAABJRU5ErkJggg==" title="plot of chunk unnamed-chunk-1" alt="plot of chunk unnamed-chunk-1" style="display: block; margin: auto;" /></p>

<pre><code class="r"># compute depth-wise differencing by profile
# note that our function expects that the column &#39;prop&#39; exists
f &lt;- function(x) { c(x$prop[1], diff(x$prop)) }
sp1$d &lt;- profileApply(sp1, FUN=f)
plot(sp1, name=&#39;d&#39;)
</code></pre>

<p><img src="data:image/png;base64,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" title="plot of chunk unnamed-chunk-1" alt="plot of chunk unnamed-chunk-1" style="display: block; margin: auto;" /></p>

<pre><code class="r"># compute depth-wise cumulative sum by profile
# note the use of an anonymous function
sp1$d &lt;- profileApply(sp1, FUN=function(x) cumsum(x$prop))
plot(sp1, name=&#39;d&#39;)
</code></pre>

<p><img src="data:image/png;base64,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" title="plot of chunk unnamed-chunk-1" alt="plot of chunk unnamed-chunk-1" style="display: block; margin: auto;" /></p>

<pre><code class="r"># compute profile-means, and save to @site
# there must be some data in @site for this to work
site(sp1) &lt;- ~ group
sp1$mean_prop &lt;- profileApply(sp1, FUN=function(x) mean(x$prop, na.rm=TRUE))

# re-plot using ranks defined by computed summaries (in @site)
plot(sp1, plot.order=rank(sp1$mean_prop))
</code></pre>

<p><img src="data:image/png;base64,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" title="plot of chunk unnamed-chunk-1" alt="plot of chunk unnamed-chunk-1" style="display: block; margin: auto;" /></p>

<pre><code class="r">## iterate over profiles, subsetting horizon data

# example data
data(sp1)

# promote to SoilProfileCollection
depths(sp1) &lt;- id ~ top + bottom
site(sp1) &lt;- ~ group

# make some fake site data related to a depth of some importance
sp1$dep &lt;- profileApply(sp1, function(i) {round(rnorm(n=1, mean=mean(i$top)))})

# custom function for subsetting horizon data, by profile
# keep horizons with lower boundary &lt; site-level attribute &#39;dep&#39;
fun &lt;- function(i) {
  # extract horizons
  h &lt;- horizons(i)
  # make an expression to subset horizons
  exp &lt;- paste(&#39;bottom &lt; &#39;, i$dep, sep=&#39;&#39;)
  # subset horizons, and write-back into current SPC
  horizons(i) &lt;- subset(h, subset=eval(parse(text=exp)))
  # return modified SPC
  return(i)
}

# list of modified SoilProfileCollection objects
l &lt;- profileApply(sp1, fun, simplify=FALSE)

# re-combine list of SoilProfileCollection objects into a single SoilProfileCollection
sp1.sub &lt;- do.call(rbind, l)

# graphically check
par(mfrow=c(2,1), mar=c(0,0,1,0))
plot(sp1)
points(1:length(sp1), sp1$dep, col=&#39;red&#39;, pch=7)
plot(sp1.sub)
</code></pre>

<p><img src="data:image/png;base64,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" title="plot of chunk unnamed-chunk-1" alt="plot of chunk unnamed-chunk-1" style="display: block; margin: auto;" /></p>

<pre><code class="r">## Not run: 
##D ##
##D ## helper functions: these must be modified to suit your own data
##D ##
##D 
##D # compute the weighted-mean of some property within a given diagnostic horizon
##D # note that this requires conditional eval of data that may contain NA
##D # see ?slab for details on the syntax
##D # note that function expects certain columns within &#39;x&#39;
##D f.diag.wt.prop &lt;- function(x, d.hz, prop) {
##D   # extract diagnostic horizon data
##D   d &lt;- diagnostic_hz(x)
##D   # subset to the requested diagnostic hz
##D   d &lt;- d[d$diag_kind == d.hz, ]
##D   # if missing return NA
##D   if(nrow(d) == 0)
##D     return(NA)
##D   
##D   # extract depths and check for missing
##D   sv &lt;- c(d$featdept, d$featdepb)
##D   if(any(is.na(sv)))
##D     return(NA)
##D   
##D   # create formula from named property
##D   fm &lt;- as.formula(paste(&#39;~&#39;, prop))
##D   # return just the (weighted) mean, accessed from @horizons
##D   s &lt;- slab(x, fm, slab.structure=sv, slab.fun=mean)$value
##D   return(s)
##D }
##D 
##D 
##D # conditional eval of thickness of some diagnostic feature or horizon
##D # will return a vector of length(x), you can save to @site
##D f.diag.thickness &lt;- function(x, d.hz) {
##D   # extract diagnostic horizon data
##D   d &lt;- diagnostic_hz(x)
##D   # subset to the requested diagnostic hz
##D   d &lt;- d[d$diag_kind == d.hz, ]
##D   # if missing return NA
##D   if(nrow(d) == 0)
##D     return(NA)
##D   
##D   # compute thickness
##D   thick &lt;- d$featdepb - d$featdept
##D   return(thick)
##D }
##D 
##D 
##D # conditional eval of property within particle size control section
##D # makes assumptions about the SPC that is passed-in
##D f.psc.prop &lt;- function(x, prop) {
##D   # these are accessed from @site
##D   sv &lt;- c(x$psctopdepth, x$pscbotdepth)
##D   # test for missing PCS data
##D   if(any(is.na(sv)))
##D     return(NA) 
##D   
##D   # this should never happen... unless someone made a mistake
##D   # check to make sure that the lower PSC boundary is shallower than the depth
##D   if(sv[2] &gt; max(x))
##D     return(NA)
##D   
##D   # create formula from named property
##D   fm &lt;- as.formula(paste(&#39;~&#39;, prop))
##D   # return just the (weighted) mean, accessed from @horizons
##D   s &lt;- slab(x, fm, slab.structure=sv, slab.fun=mean)$value
##D   return(s)
##D }
##D 
##D # try with some sample data
##D data(loafercreek, package=&#39;soilDB&#39;)
##D 
##D profileApply(loafercreek, f.diag.wt.prop, d.hz=&#39;argillic horizon&#39;, prop=&#39;clay&#39;)
##D profileApply(loafercreek, f.diag.thickness, d.hz=&#39;argillic horizon&#39;)
##D profileApply(loafercreek, f.psc.prop, prop=&#39;clay&#39;)
##D 
## End(Not run)
</code></pre>


<hr /><div style="text-align: center;">[Package <em>aqp</em> version 1.9.1 <a href="00Index.html">Index</a>]</div>
</body></html>
