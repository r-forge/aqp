<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>R: Slicing of SoilProfilecollection Objects</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="R.css">

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head><body>

<table width="100%" summary="page for slice-methods {aqp}"><tr><td>slice-methods {aqp}</td><td align="right">R Documentation</td></tr></table>

<h2>Slicing of SoilProfilecollection Objects</h2>

<h3>Description</h3>

<p>Slicing of SoilProfilecollection Objects</p>


<h3>Methods</h3>



<dl>
<dt><code>signature(object = "SoilProfileCollection")</code></dt><dd>

</dd>
</dl>


<h3>Author(s)</h3>

<p>Dylan E. Beaudette</p>


<h3>References</h3>

<p>http://casoilresource.lawr.ucdavis.edu/</p>


<h3>See Also</h3>

<p><code><a href="SPC-slab-methods.html">slab</a></code></p>


<h3>Examples</h3>

<pre><code class="r">
# simulate some data, IDs are 1:20
library(plyr)
d &lt;- ldply(1:20, random_profile)

# init SoilProfilecollection object
depths(d) &lt;- id ~ top + bottom
head(horizons(d))
</code></pre>

<pre><code>##   id top bottom name      p1      p2      p3     p4       p5
## 1  1   0     11   H1  0.7875 -0.9857   3.131  0.225  1.88210
## 2  1  11     25   H2  9.3261  1.8972   6.715  1.989 -7.15118
## 3  1  25     42   H3 12.7330  6.6146  15.146  8.095  0.02654
## 4  1  42     63   H4 13.3288  4.8892   1.892 14.708  1.55776
## 5  1  63     85   H5  6.4907 12.8559  -3.587 25.382  1.87918
## 6  1  85    106   H6 -0.9214 -1.8771 -12.972 30.733 -0.24156
</code></pre>

<pre><code class="r">
# generate single slice at 10 cm
# output is a SoilProfilecollection object
s &lt;- slice(d, 10 ~ name + p1 + p2 + p3)

# generate single slice at 10 cm, output data.frame
s &lt;- slice(d, 10 ~ name + p1 + p2 + p3, just.the.data=TRUE)

# generate integer slices from 0 - 25 cm
s &lt;- slice(d, 0:25 ~ name + p1 + p2 + p3)
plot(s)
</code></pre>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAJYCAMAAACJuGjuAAAAclBMVEX9/v0AAAAAAEYAAHMARpoAdL1GAABGAEZGAHNGRgBGRkZGdL1Gm95zAABzAHNzRppzdABzdL1zm95zvv2aRgCam3Oavpqa3/29dAC9dEa9dHO9m0a9/v3em0be397e/v39vnP935r9/r39/t79/v3///+f/745AAAAJnRSTlP///////////////////////////////////////////////8A/xlck0MAAAAJcEhZcwAAD2EAAA9hAag/p2kAABLdSURBVHic7Z0Bd9o4GkWHdJKZTeh2NjSbNom3kNL//xcXmULAErb84Wc+mXtPt+eM6voZdEfGepPljzWAgD8ufQEwTRALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSBhLrNVfz6mRajabx4c1Dg7/+PPrbHYbHfltNltEf/vn1+SBN8/NwWXilJsLOr6k3V+/bYyFCzrMXseXuBtpvsjouveH30ZjzQsPNK87EF337m9HR8YXLmEksVZ3zbenHtnM0JFE28MaB9f/WH16e/+8aAwub56Xn96aIdWxBGHw59fj97wlfDMbB6fc5xweub2gP380/G9e4m6kmbNuXvf+8JQFkSzRde/4Fp2ycd2/U6ILlzCOWKu//tt4LduR5fFcbAcbB+//MT5yXc9dY2z19z+3zb/9/vno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SEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEmKFr44O3wZ93okR67pJiBW+Ojp8f/2P7ZeN3988zeb9T4xY183HF4x9KLb89Pbytt78qharh2q+vHX7LfZQFquHrVibX0GuR8SCAQhfHb29FYbfXxELhiF8dfT2w3v9GQuxwBOIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFgg4f+Fe5Erwtv2wgAAAABJRU5ErkJggg==" alt="plot of chunk unnamed-chunk-1"/> </p>

<pre><code class="r">
# generate slices from 0 - 10 cm, for all variables
s &lt;- slice(d, 0:10 ~ .)
print(s)
</code></pre>

<pre><code>## Object of class SoilProfileCollection
## Number of profiles: 20
## Depth range: 11-11 cm
## 
## Horizon attributes:
##     id top bottom name     p1      p2    p3    p4    p5 .pctMissing
## 1    1   0      1   H1 0.7875 -0.9857 3.131 0.225 1.882           0
## 21   1   1      2   H1 0.7875 -0.9857 3.131 0.225 1.882           0
## 41   1   2      3   H1 0.7875 -0.9857 3.131 0.225 1.882           0
## 61   1   3      4   H1 0.7875 -0.9857 3.131 0.225 1.882           0
## 81   1   4      5   H1 0.7875 -0.9857 3.131 0.225 1.882           0
## 101  1   5      6   H1 0.7875 -0.9857 3.131 0.225 1.882           0
## 
## Sampling site attributes:
##   id
## 1  1
## 2  2
## 3  3
## 4  4
## 5  5
## 6  6
</code></pre>

<pre><code class="r">
# note that pct missing is computed for each slice,
# if all vars are missing, then NA is returned
d$p1[1:10] &lt;- NA
s &lt;- slice(d, 10 ~ ., just.the.data=TRUE)
print(s)
</code></pre>

<pre><code>##    id top bottom name      p1       p2       p3         p4       p5
## 1   1  10     11   H1      NA -0.98566  3.13116   0.224991   1.8821
## 2   2  10     11   H1      NA  0.86931 -0.52223   0.989351  -0.3584
## 3   3  10     11   H2  2.6703 10.17943 15.92656 -14.196747 -11.0000
## 4   4  10     11   H1  0.3491  0.92761 -0.68734   1.614421  -0.4350
## 5   5  10     11   H1 -0.5697 -0.00899 -0.77495  -0.613919   1.1611
## 6   6  10     11   H1 -0.4945 -0.74455 -0.97533   2.773499   1.9099
## 7   7  10     11   H1 -0.7313  1.51204  0.60344  -0.008012   0.7600
## 8   8  10     11   H1 -0.1848  2.52174 -0.03121  -0.353147   1.2451
## 9   9  10     11   H1 -0.2970 -0.12185 -2.04962  -1.306901  -1.7550
## 10 10  10     11   H2 -3.5561  3.27303 -1.95473 -23.355107  14.6256
## 11 11  10     11   H1  1.0460 -0.19700 -1.05750  -0.743528  -1.2293
## 12 12  10     11   H1 -0.5228 -0.27612  0.46604   0.686838   1.4549
## 13 13  10     11   H1 -0.3070 -0.28976  1.76781   0.131303  -1.1680
## 14 14  10     11   H2 -6.7932 19.45115  1.66938  -5.635331 -10.1691
## 15 15  10     11   H2 -6.0153 -0.91828  6.11819  -9.457060  11.4963
## 16 16  10     11   H2 -6.8369  0.94403  3.85859  18.967096  10.9226
## 17 17  10     11   H1 -1.4776  1.56305  0.51678   0.946572   1.0199
## 18 18  10     11   H1  1.5797  2.98791 -0.33757  -0.477322   0.4786
## 19 19  10     11   H1 -0.4337  2.54414  0.35798  -0.512299  -0.4116
## 20 20  10     11   H1  0.2281  0.34810 -1.14418  -0.225864   0.3692
##    .pctMissing
## 1       0.1667
## 2       0.1667
## 3       0.0000
## 4       0.0000
## 5       0.0000
## 6       0.0000
## 7       0.0000
## 8       0.0000
## 9       0.0000
## 10      0.0000
## 11      0.0000
## 12      0.0000
## 13      0.0000
## 14      0.0000
## 15      0.0000
## 16      0.0000
## 17      0.0000
## 18      0.0000
## 19      0.0000
## 20      0.0000
</code></pre>

<pre><code class="r">
## 
## check sliced data
##

# test that mean of 1 cm slices property is equal to the 
# hz-thickness weighted mean value of that property
data(sp1)
depths(sp1) &lt;- id ~ top + bottom

# get the first profile
sp1.sub &lt;- sp1[which(profile_id(sp1) == &#39;P009&#39;), ]

# compute hz-thickness wt. mean
hz.wt.mean &lt;- with(horizons(sp1.sub), 
sum((bottom - top) * prop) / sum(bottom - top) 
)

# hopefully the same value, calculated via slice()
s &lt;- slice(sp1.sub, 0:max(sp1.sub) ~ prop)
</code></pre>

<pre><code>## Error: object &#39;sp1.sub&#39; not found
</code></pre>

<pre><code class="r">hz.slice.mean &lt;- mean(s$prop, na.rm=TRUE)

# same?
if(!all.equal(hz.slice.mean, hz.wt.mean))
    stop(&#39;there is a bug in slice() !!!&#39;)
</code></pre>

<pre><code>## Error: invalid argument type
</code></pre>

<pre><code class="r">
</code></pre>


<hr><div align="center">[Package <em>aqp</em> version 1.4-7 <a href="00Index.html">Index</a>]</div>
</body></html>
