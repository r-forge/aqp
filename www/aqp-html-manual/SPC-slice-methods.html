<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>R: Slicing of SoilProfilecollection Objects</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="R.css">

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head><body>

<table width="100%" summary="page for slice-methods {aqp}"><tr><td>slice-methods {aqp}</td><td align="right">R Documentation</td></tr></table>

<h2>Slicing of SoilProfilecollection Objects</h2>

<h3>Description</h3>

<p>Slicing of SoilProfilecollection Objects</p>


<h3>Methods</h3>



<dl>
<dt><code>signature(object = "SoilProfileCollection")</code></dt><dd>

</dd>
</dl>


<h3>Author(s)</h3>

<p>Dylan E. Beaudette</p>


<h3>References</h3>

<p>http://casoilresource.lawr.ucdavis.edu/</p>


<h3>See Also</h3>

<p><code><a href="SPC-slab-methods.html">slab</a></code></p>


<h3>Examples</h3>

<pre><code class="r">
# simulate some data, IDs are 1:20
library(plyr)
d &lt;- ldply(1:20, random_profile)

# init SoilProfilecollection object
depths(d) &lt;- id ~ top + bottom
head(horizons(d))
</code></pre>

<pre><code>##   id top bottom name       p1       p2      p3      p4       p5
## 1  1   0      6   H1   0.3921 -0.05849 -0.6370  1.3813  -1.6007
## 2  1   6     13   H2   1.6877 -0.66881  9.2444  8.3799 -18.7919
## 3  1  13     36   H3   0.9809 -5.96088  4.9614 21.8065 -18.8124
## 4  2   0     20   H1  -0.9532  1.90914 -0.4061 -0.7917   0.5737
## 5  2  20     35   H2 -15.6927  6.04807  3.7258  3.2484  -2.5205
## 6  2  35     48   H3 -11.9231  0.12270  7.4646  0.7810   5.2774
</code></pre>

<pre><code class="r">
# generate single slice at 10 cm
# output is a SoilProfilecollection object
s &lt;- slice(d, 10 ~ name + p1 + p2 + p3)

# generate single slice at 10 cm, output data.frame
s &lt;- slice(d, 10 ~ name + p1 + p2 + p3, just.the.data=TRUE)

# generate integer slices from 0 - 25 cm
s &lt;- slice(d, 0:25 ~ name + p1 + p2 + p3)
plot(s)
</code></pre>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAJYCAMAAACJuGjuAAAAclBMVEX9/v0AAAAAAEYAAHMARpoAdL1GAABGAEZGAHNGRgBGRkZGdL1Gm95zAABzAHNzRppzdABzdL1zm95zvv2aRgCam3Oavpqa3/29dAC9dEa9dHO9m0a9/v3em0be397e/v39vnP935r9/r39/t79/v3///+f/745AAAAJnRSTlP///////////////////////////////////////////////8A/xlck0MAAAAJcEhZcwAAD2EAAA9hAag/p2kAABK7SURBVHic7Z2Ndtu4EUZXztq7tZWmteI6sc1Gctj3f8UKVKyIAPg34icNpHuP1+cES2tAzQ1I4ouP/qgBBPxx7gnAZYJYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQMKpxNr89ZwbqRaLZXpYdHD448+vi8VtcuS3xWKV/PTPr9kDb57jwXXmJbcTak/p48dvo7EwocPadTrFj5H4JJN57w+/TcbiiQfieQeSeX/8dHJkOnEJJxJrcxe/Pc3ItkMtiXaHRQc3f6w+vb1/XkWD65vn9ae3uEjVliAM/vzafs97im+7cfCS+zqHR+4m9OePyP94ih8jcZ06nvf+8JwFiSzJvD/4lrxkNO9fVZKJSziNWJu//hOdy25k3e7FbjA6eP/H9Mi66V00tvn7X7fxT79/bv3V3RfP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" alt="plot of chunk unnamed-chunk-1"/> </p>

<pre><code class="r">
# generate slices from 0 - 10 cm, for all variables
s &lt;- slice(d, 0:10 ~ .)
print(s)
</code></pre>

<pre><code>## Object of class SoilProfileCollection
## Number of profiles: 20
## Depth range: 11-11 cm
## 
## Horizon attributes:
##     id top bottom name     p1       p2     p3    p4     p5 .pctMissing
## 1    1   0      1   H1 0.3921 -0.05849 -0.637 1.381 -1.601           0
## 21   1   1      2   H1 0.3921 -0.05849 -0.637 1.381 -1.601           0
## 41   1   2      3   H1 0.3921 -0.05849 -0.637 1.381 -1.601           0
## 61   1   3      4   H1 0.3921 -0.05849 -0.637 1.381 -1.601           0
## 81   1   4      5   H1 0.3921 -0.05849 -0.637 1.381 -1.601           0
## 101  1   5      6   H1 0.3921 -0.05849 -0.637 1.381 -1.601           0
## 
## Sampling site attributes:
##   id
## 1  1
## 2  2
## 3  3
## 4  4
## 5  5
## 6  6
</code></pre>

<pre><code class="r">
# note that pct missing is computed for each slice,
# if all vars are missing, then NA is returned
d$p1[1:10] &lt;- NA
s &lt;- slice(d, 10 ~ ., just.the.data=TRUE)
print(s)
</code></pre>

<pre><code>##    id top bottom name       p1       p2       p3        p4        p5
## 1   1  10     11   H2       NA -0.66881  9.24443   8.37992 -18.79190
## 2   2  10     11   H1       NA  1.90914 -0.40613  -0.79171   0.57374
## 3   3  10     11   H1       NA  0.25449  0.08011   0.66980  -0.55646
## 4   4  10     11   H1  -1.4004 -0.13531  1.20309  -0.80108   0.24237
## 5   5  10     11   H2  13.8534 -4.50335  8.31813  12.22670   2.43541
## 6   6  10     11   H1   1.6193 -0.49164  0.76530   2.20245  -1.00986
## 7   7  10     11   H1  -0.5404 -1.32522  2.71248   0.58897  -0.09128
## 8   8  10     11   H1   1.2619 -0.49454  2.21272   1.29101   1.82793
## 9   9  10     11   H1  -1.7857 -1.15012 -0.07869  -0.81717  -0.85752
## 10 10  10     11   H1   1.6428  0.88890  0.93537   0.03488  -0.07766
## 11 11  10     11   H2 -15.8224  1.24087 10.75227 -14.51677   7.18338
## 12 12  10     11   H1  -0.7640 -0.30797 -1.80871   0.82874  -2.18276
## 13 13  10     11   H1   0.3779 -0.05734 -0.16466   0.64086   1.33107
## 14 14  10     11   H1   0.5847 -0.51814  0.44618  -1.08492   0.48042
## 15 15  10     11   H1  -1.4001  1.06560  1.05953  -0.96518   0.34956
## 16 16  10     11   H1   0.6380  1.46291 -0.81349  -1.33394   0.78747
## 17 17  10     11   H2  11.4373 -0.55793 -3.03195 -13.79070  -8.34321
## 18 18  10     11   H2   3.7248  1.89312 -0.71175  -1.90635  12.36332
## 19 19  10     11   H1  -0.6321  1.83652  0.82525   0.78934   2.13464
## 20 20  10     11   H2  -6.7078 -0.46487 -6.50962  -7.68809 -12.87796
##    .pctMissing
## 1       0.1667
## 2       0.1667
## 3       0.1667
## 4       0.0000
## 5       0.0000
## 6       0.0000
## 7       0.0000
## 8       0.0000
## 9       0.0000
## 10      0.0000
## 11      0.0000
## 12      0.0000
## 13      0.0000
## 14      0.0000
## 15      0.0000
## 16      0.0000
## 17      0.0000
## 18      0.0000
## 19      0.0000
## 20      0.0000
</code></pre>

<pre><code class="r">
## 
## check sliced data
##

# test that mean of 1 cm slices property is equal to the 
# hz-thickness weighted mean value of that property
data(sp1)
depths(sp1) &lt;- id ~ top + bottom

# get the first profile
sp1.sub &lt;- sp1[which(profile_id(sp1) == &#39;P009&#39;), ]

# compute hz-thickness wt. mean
hz.wt.mean &lt;- with(horizons(sp1.sub), 
sum((bottom - top) * prop) / sum(bottom - top) 
)

# hopefully the same value, calculated via slice()
s &lt;- slice(sp1.sub, 0:max(sp1.sub) ~ prop)
hz.slice.mean &lt;- mean(s$prop, na.rm=TRUE)

# same?
if(!all.equal(hz.slice.mean, hz.wt.mean))
    stop(&#39;there is a bug in slice() !!!&#39;)

</code></pre>


<hr><div align="center">[Package <em>aqp</em> version 1.5 <a href="00Index.html">Index</a>]</div>
</body></html>
