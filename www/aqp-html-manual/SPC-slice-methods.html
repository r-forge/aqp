<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>R: Slicing of SoilProfilecollection Objects</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="R.css">

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head><body>

<table width="100%" summary="page for slice-methods {aqp}"><tr><td>slice-methods {aqp}</td><td align="right">R Documentation</td></tr></table>

<h2>Slicing of SoilProfilecollection Objects</h2>

<h3>Description</h3>

<p>Slicing of SoilProfilecollection Objects</p>


<h3>Methods</h3>



<dl>
<dt><code>signature(object = "SoilProfileCollection")</code></dt><dd>

</dd>
</dl>


<h3>Author(s)</h3>

<p>Dylan E. Beaudette</p>


<h3>References</h3>

<p>http://casoilresource.lawr.ucdavis.edu/</p>


<h3>See Also</h3>

<p><code><a href="SPC-slab-methods.html">slab</a></code></p>


<h3>Examples</h3>

<pre><code class="r">
# simulate some data, IDs are 1:20
library(plyr)
d &lt;- ldply(1:20, random_profile)

# init SoilProfilecollection object
depths(d) &lt;- id ~ top + bottom
head(horizons(d))
</code></pre>

<pre><code>##   id top bottom name      p1       p2      p3       p4       p5
## 1  1   0     18   H1 -0.1859  -0.1709 -0.8031   1.8683 -0.05752
## 2  1  18     26   H2  6.7661  -6.9931  7.1928  -2.0567 13.90975
## 3  1  26     46   H3 13.3646 -10.1461 14.1036   2.5834 18.26999
## 4  1  46     71   H4 14.1003  -0.8262 22.3976 -18.2044 21.72625
## 5  1  71     91   H5 13.6204 -13.8691 26.4517 -23.3991 30.02068
## 6  2   0     23   H1 -0.4595   0.7423 -1.3261  -0.3457  0.29675
</code></pre>

<pre><code class="r">
# generate single slice at 10 cm
# output is a SoilProfilecollection object
s &lt;- slice(d, 10 ~ name + p1 + p2 + p3)

# generate single slice at 10 cm, output data.frame
s &lt;- slice(d, 10 ~ name + p1 + p2 + p3, just.the.data=TRUE)

# generate integer slices from 0 - 25 cm
s &lt;- slice(d, 0:25 ~ name + p1 + p2 + p3)
plot(s)
</code></pre>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAJYCAMAAACJuGjuAAAAclBMVEX9/v0AAAAAAEYAAHMARpoAdL1GAABGAEZGAHNGRgBGRkZGdL1Gm95zAABzAHNzRppzdABzdL1zm95zvv2aRgCam3Oavpqa3/29dAC9dEa9dHO9m0a9/v3em0be397e/v39vnP935r9/r39/t79/v3///+f/745AAAAJnRSTlP///////////////////////////////////////////////8A/xlck0MAAAAJcEhZcwAAD2EAAA9hAag/p2kAABNTSURBVHic7Z2Bdts2EkUrp3a7sbLZRsk6sc2N5Cj//4srULEjApAIDvmkAXXv8aanU4rDELeAiNcs/9gCCPjj0hcA8wSxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigYRzibX56yFXaRaLZXpYdHD42x+fF4vb5Mivi8Uq+fSPz9kDbx7i4jpzyt0FdS/p9eO3US1c0GHvbXqJr5X4N5lc99vht0ktvvBAfN2B5LpfP50cmV64hDOJtbmLb09b2Y1QR6L9YdHB7d82755fPqyi4vrmYf3uOW7SdCUIxR+fu/f8RPPdaByc8q3P4ZH7C/rze+R/fImvlbjPNr7ut8NzFiSyJNf9ytfklNF1/+qSXLiE84i1+eu/0e9lX1l3x2JfjA5++9v0yG07dlFt8/d/buNPv3zo/Kv7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" alt="plot of chunk unnamed-chunk-1"/> </p>

<pre><code class="r">
# generate slices from 0 - 10 cm, for all variables
s &lt;- slice(d, 0:10 ~ .)
print(s)
</code></pre>

<pre><code>## Object of class SoilProfileCollection
## Number of profiles: 20
## Depth range: 11-11 cm
## 
## Horizon attributes:
##     id top bottom name      p1      p2      p3    p4       p5 .pctMissing
## 1    1   0      1   H1 -0.1859 -0.1709 -0.8031 1.868 -0.05752           0
## 21   1   1      2   H1 -0.1859 -0.1709 -0.8031 1.868 -0.05752           0
## 41   1   2      3   H1 -0.1859 -0.1709 -0.8031 1.868 -0.05752           0
## 61   1   3      4   H1 -0.1859 -0.1709 -0.8031 1.868 -0.05752           0
## 81   1   4      5   H1 -0.1859 -0.1709 -0.8031 1.868 -0.05752           0
## 101  1   5      6   H1 -0.1859 -0.1709 -0.8031 1.868 -0.05752           0
## 
## Sampling site attributes:
##   id
## 1  1
## 2  2
## 3  3
## 4  4
## 5  5
## 6  6
</code></pre>

<pre><code class="r">
# note that pct missing is computed for each slice,
# if all vars are missing, then NA is returned
d$p1[1:10] &lt;- NA
s &lt;- slice(d, 10 ~ ., just.the.data=TRUE)
print(s)
</code></pre>

<pre><code>##    id top bottom name       p1        p2        p3      p4        p5
## 1   1  10     11   H1       NA  -0.17086  -0.80309  1.8683  -0.05752
## 2   2  10     11   H1       NA   0.74225  -1.32613 -0.3457   0.29675
## 3   3  10     11   H1   0.7508  -0.05232   2.20129 -0.3432   0.88570
## 4   4  10     11   H1   0.5401  -1.27848   0.05196  0.9164  -0.44054
## 5   5  10     11   H1  -0.3869  -0.29048   1.51101  0.1457   0.54323
## 6   6  10     11   H2  -3.1532 -11.41467 -11.42513 -7.9228  -4.79067
## 7   7  10     11   H1  -0.6606   1.49791  -0.52156  0.3491  -0.03453
## 8   8  10     11   H1  -0.4793  -0.36633  -0.37944  1.0373  -1.79045
## 9   9  10     11   H2  -7.9981  -0.74205   1.04967  9.0685  -0.06651
## 10 10  10     11   H2  -5.0033   9.12590 -18.80000 -9.6566 -12.95951
## 11 11  10     11   H1  -0.8642  -0.63648   0.54200  0.2988   0.24170
## 12 12  10     11   H1  -0.7508   0.49225  -0.44859 -0.1195   0.21150
## 13 13  10     11   H2 -10.0568   8.05991   8.89161 -0.6343  -3.82390
## 14 14  10     11   H2  -1.6379 -14.90529 -11.08759 15.8337  11.12247
## 15 15  10     11   H1   1.9768   1.10666   1.17693  0.3831  -0.15069
## 16 16  10     11   H1   1.6815   0.72308  -0.73107  0.6231   0.47071
## 17 17  10     11   H1  -0.1669  -0.90657   1.07905 -0.5132  -0.94586
## 18 18  10     11   H1   0.7856   0.94785  -1.68571 -0.4866   0.73000
## 19 19  10     11   H1   0.6320  -0.18671  -0.46462 -1.4849   0.90082
## 20 20  10     11   H1  -0.2088  -1.24472  -0.57303  1.2556   0.97150
##    .pctMissing
## 1       0.1667
## 2       0.1667
## 3       0.0000
## 4       0.0000
## 5       0.0000
## 6       0.0000
## 7       0.0000
## 8       0.0000
## 9       0.0000
## 10      0.0000
## 11      0.0000
## 12      0.0000
## 13      0.0000
## 14      0.0000
## 15      0.0000
## 16      0.0000
## 17      0.0000
## 18      0.0000
## 19      0.0000
## 20      0.0000
</code></pre>

<pre><code class="r">
## 
## check sliced data
##

# test that mean of 1 cm slices property is equal to the 
# hz-thickness weighted mean value of that property
data(sp1)
depths(sp1) &lt;- id ~ top + bottom

# get the first profile
sp1.sub &lt;- sp1[which(profile_id(sp1) == &#39;P009&#39;), ]

# compute hz-thickness wt. mean
hz.wt.mean &lt;- with(horizons(sp1.sub), 
sum((bottom - top) * prop) / sum(bottom - top) 
)

# hopefully the same value, calculated via slice()
s &lt;- slice(sp1.sub, 0:max(sp1.sub) ~ prop)
</code></pre>

<pre><code>## Error: object &#39;sp1.sub&#39; not found
</code></pre>

<pre><code class="r">hz.slice.mean &lt;- mean(s$prop, na.rm=TRUE)

# same?
if(!all.equal(hz.slice.mean, hz.wt.mean))
    stop(&#39;there is a bug in slice() !!!&#39;)
</code></pre>

<pre><code>## Error: invalid argument type
</code></pre>

<pre><code class="r">
</code></pre>


<hr><div align="center">[Package <em>aqp</em> version 1.4-7 <a href="00Index.html">Index</a>]</div>
</body></html>
