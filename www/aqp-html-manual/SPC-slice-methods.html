<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>R: Slicing of SoilProfilecollection Objects</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="R.css">

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head><body>

<table width="100%" summary="page for slice-methods {aqp}"><tr><td>slice-methods {aqp}</td><td align="right">R Documentation</td></tr></table>

<h2>Slicing of SoilProfilecollection Objects</h2>

<h3>Description</h3>

<p>Slicing of SoilProfilecollection Objects</p>


<h3>Methods</h3>



<dl>
<dt><code>signature(object = "SoilProfileCollection")</code></dt><dd>

</dd>
</dl>


<h3>Author(s)</h3>

<p>Dylan E. Beaudette</p>


<h3>References</h3>

<p>http://casoilresource.lawr.ucdavis.edu/</p>


<h3>See Also</h3>

<p><code><a href="SPC-slab-methods.html">slab</a></code></p>


<h3>Examples</h3>

<pre><code class="r">
# simulate some data, IDs are 1:20
library(plyr)
d &lt;- ldply(1:20, random_profile)

# init SoilProfilecollection object
depths(d) &lt;- id ~ top + bottom
head(horizons(d))
</code></pre>

<pre><code>##   id top bottom name      p1      p2       p3      p4      p5
## 1  1   0     28   H1  0.4168  1.5535  -0.1227  -1.488   1.009
## 2  1  28     51   H2 21.3572 13.1834 -12.4277  -1.585  -2.625
## 3  1  51     64   H3 21.1939 10.0700 -18.9429 -10.535  -1.149
## 4  1  64     70   H4 12.0029 -3.9175  -7.9564  -8.298  -6.116
## 5  1  70     94   H5 19.9187  0.3029 -13.6319  -3.019 -10.297
## 6  1  94    116   H6 21.4499  7.8388  -8.3024 -17.520 -25.240
</code></pre>

<pre><code class="r">
# generate single slice at 10 cm
# output is a SoilProfilecollection object
s &lt;- slice(d, 10 ~ name + p1 + p2 + p3)

# generate single slice at 10 cm, output data.frame
s &lt;- slice(d, 10 ~ name + p1 + p2 + p3, just.the.data=TRUE)

# generate integer slices from 0 - 25 cm
s &lt;- slice(d, 0:25 ~ name + p1 + p2 + p3)
plot(s)
</code></pre>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAJYCAMAAACJuGjuAAAAclBMVEX9/v0AAAAAAEYAAHMARpoAdL1GAABGAEZGAHNGRgBGRkZGdL1Gm95zAABzAHNzRppzdABzdL1zm95zvv2aRgCam3Oavpqa3/29dAC9dEa9dHO9m0a9/v3em0be397e/v39vnP935r9/r39/t79/v3///+f/745AAAAJnRSTlP///////////////////////////////////////////////8A/xlck0MAAAAJcEhZcwAAD2EAAA9hAag/p2kAABMISURBVHic7Z0Ne5vIFUZXzjq7tZWmteI6H1YjOer//4vVIEsBZgTDFa+4I8553PTZG+Ai5uwA864f/bEDEPDH1CcAtwligQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgmIBRIQCyQgFkhALJCAWCABsUACYoEExAIJiAUSEAskIBZIQCyQgFggAbFAAmKBBMQCCYgFEhALJCAWSEAskIBYIAGxQAJigQTEAgnXEmv710uqsl4slvFmrY3DP/76sljcR1t+XSxW0d6/viQ3vHtpFzeJQ+5PqHlKx93vW7VwQvXeu/gUj5X2h4zO+7T5fVRrn3igfd6B6LyPe0dbxicu4UpibT+2L09V2Y9QQ6LDZq2Nq39cf3h9+7RqFTd3L5sPr+0m66YEofjrS/OadzTfj0btkKc+9S0PJ/Tnz5b/7VM8Vtp9du3zPm2esiCSJTrvI1+jQ7bO+71LdOISriPW9q//tD7LobJpjsWh2Nr49I/xlrtq7Fq17d//um/v/fap8a/u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" alt="plot of chunk unnamed-chunk-1"/> </p>

<pre><code class="r">
# generate slices from 0 - 10 cm, for all variables
s &lt;- slice(d, 0:10 ~ .)
print(s)
</code></pre>

<pre><code>## Object of class SoilProfileCollection
## Number of profiles: 20
## Depth range: 11-11 cm
## 
## Horizon attributes:
##     id top bottom name     p1    p2      p3     p4    p5 .pctMissing
## 1    1   0      1   H1 0.4168 1.553 -0.1227 -1.488 1.009           0
## 21   1   1      2   H1 0.4168 1.553 -0.1227 -1.488 1.009           0
## 41   1   2      3   H1 0.4168 1.553 -0.1227 -1.488 1.009           0
## 61   1   3      4   H1 0.4168 1.553 -0.1227 -1.488 1.009           0
## 81   1   4      5   H1 0.4168 1.553 -0.1227 -1.488 1.009           0
## 101  1   5      6   H1 0.4168 1.553 -0.1227 -1.488 1.009           0
## 
## Sampling site attributes:
##   id
## 1  1
## 2  2
## 3  3
## 4  4
## 5  5
## 6  6
</code></pre>

<pre><code class="r">
# note that pct missing is computed for each slice,
# if all vars are missing, then NA is returned
d$p1[1:10] &lt;- NA
s &lt;- slice(d, 10 ~ ., just.the.data=TRUE)
print(s)
</code></pre>

<pre><code>##    id top bottom name       p1       p2       p3        p4      p5
## 1   1  10     11   H1       NA  1.55350  -0.1227  -1.48817  1.0089
## 2   2  10     11   H1       NA -0.61765  -0.7152   1.19252  0.8721
## 3   3  10     11   H2  9.31312  0.02085  -5.0222  -1.45800  7.2117
## 4   4  10     11   H2  7.54213 -1.07392  -0.3418 -18.32866 -2.3015
## 5   5  10     11   H1  1.29031  0.83327  -2.0113   0.37627  1.4015
## 6   6  10     11   H1 -0.46532 -0.44289   0.5428  -0.26284 -2.5132
## 7   7  10     11   H1  0.86764 -0.03268   1.3322  -0.30331  0.6583
## 8   8  10     11   H1  0.08257  0.65362  -0.9915   0.06888 -0.1530
## 9   9  10     11   H1 -0.22758 -0.79245  -0.4847  -0.16248  0.4469
## 10 10  10     11   H1 -0.44177 -0.32062   0.1614   1.60933 -0.1891
## 11 11  10     11   H1 -1.45037 -0.40881  -0.2038   0.23199  0.7801
## 12 12  10     11   H1 -0.11878 -0.41406   0.3517  -1.30394  0.2435
## 13 13  10     11   H1 -0.06092 -1.00009  -0.8453  -1.95248  0.5316
## 14 14  10     11   H2 -0.93421  5.57965 -11.2700 -17.89603  9.4277
## 15 15  10     11   H2 -7.17790 -8.36036  -0.3627   2.91929 -4.9132
## 16 16  10     11   H1  1.78402 -0.81956   2.0944  -1.86651 -0.2787
## 17 17  10     11   H1  0.20186  1.63597  -0.3080   0.73894  0.9218
## 18 18  10     11   H1 -0.19311 -0.29021   0.4611  -0.39209 -1.2761
## 19 19  10     11   H1 -0.59591  0.62946   1.8648  -0.04460  1.8055
## 20 20  10     11   H2  3.89969 14.85110 -13.2358   4.86825 -0.7076
##    .pctMissing
## 1       0.1667
## 2       0.1667
## 3       0.0000
## 4       0.0000
## 5       0.0000
## 6       0.0000
## 7       0.0000
## 8       0.0000
## 9       0.0000
## 10      0.0000
## 11      0.0000
## 12      0.0000
## 13      0.0000
## 14      0.0000
## 15      0.0000
## 16      0.0000
## 17      0.0000
## 18      0.0000
## 19      0.0000
## 20      0.0000
</code></pre>

<pre><code class="r">
## 
## check sliced data
##

# test that mean of 1 cm slices property is equal to the 
# hz-thickness weighted mean value of that property
data(sp1)
depths(sp1) &lt;- id ~ top + bottom

# get the first profile
sp1.sub &lt;- sp1[which(profile_id(sp1) == &#39;P009&#39;), ]

# compute hz-thickness wt. mean
hz.wt.mean &lt;- with(horizons(sp1.sub), 
sum((bottom - top) * prop) / sum(bottom - top) 
)

# hopefully the same value, calculated via slice()
s &lt;- slice(sp1.sub, 0:max(sp1.sub) ~ prop)
hz.slice.mean &lt;- mean(s$prop, na.rm=TRUE)

# same?
if(!all.equal(hz.slice.mean, hz.wt.mean))
    stop(&#39;there is a bug in slice() !!!&#39;)

</code></pre>


<hr><div align="center">[Package <em>aqp</em> version 1.5 <a href="00Index.html">Index</a>]</div>
</body></html>
